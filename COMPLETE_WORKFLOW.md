# ๐๏ธ ูุธุงู ุงูููุชุฌุงุช ูุทูุจุงุช ุงููุงุชุณุงุจ - ุงูุชูุซูู ุงููุงูู

## ๐ฑ ุณูุฑ ุงูุนูู ุงููุงูู (Complete Workflow)

### ๐ฏ ุงูุณููุงุฑูู ุงูุนููู:

```
ูุชุฌุฑ: ูููุชูุง ุงููุฎุชุตุฉ
ููุชุฌ: ูุงุจุชุดููู
ุงูุณุนุฑ: 16 ุฑูุงู
ุงููุฏููุฉ: ุงูุฑูุงุถ
```

---

## โก ุงูุฎุทูุงุช ุงูุชูุตูููุฉ

### 1๏ธโฃ ุงูุชุงุฌุฑ ูุถูู ูุชุฌุฑู
```
โ ูุฏุฎู ุฅูู /merchant
โ ูููุฃ ูุนูููุงุช ุงููุชุฌุฑ:
   - ุงุณู ุงููุชุฌุฑ
   - ุงูุตูุฑ (logo + cover)
   - ุงููุฏููุฉ + ุงูุฅุญุฏุงุซูุงุช
   - ุงูุชุตููู
   - ุฑูู ุงููุงุชุณุงุจ
   - ุงูุนููุงู
   
๐ ููุญูุธ ูู ุฌุฏูู: stores
```

### 2๏ธโฃ ุงูุชุงุฌุฑ ูุถูู ููุชุฌุงุชู
```
โ ูู ููุญุฉ ุงูุชุงุฌุฑ โ ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
โ ูููุฃ ูุนูููุงุช ุงูููุชุฌ:
   - ุงุณู ุงูููุชุฌ: "ูุงุจุชุดููู"
   - ุงูุณุนุฑ: 16 ุฑูุงู
   - ุงูุณุนุฑ ุงููุฏูู: 20 ุฑูุงู (ุงุฎุชูุงุฑู)
   - ุงููุตู
   - ุตูุฑ ูุชุนุฏุฏุฉ
   - ุญุงูุฉ ุงููุดุฑ (ูุดุท/ูุฎูู)
   
๐ ููุญูุธ ูู ุฌุฏูู: products
   - store_id: ุฑุงุจุท ุจุงููุชุฌุฑ
```

### 3๏ธโฃ ุงูุนููู ูุชุตูุญ ุงูููุตุฉ
```
ุงูุทุฑููุฉ 1: ูุงุฆูุฉ ุงููุชุงุฌุฑ
   โ
   ูุฏุฎู ุตูุญุฉ ุงููุชุฌุฑ
   โ
   ูุดุงูุฏ ุงูููุชุฌุงุช

ุงูุทุฑููุฉ 2: ุงูุจุญุซ ุงููุจุงุดุฑ
   โ
   ููุชูู ูุจุงุดุฑุฉ ูุตูุญุฉ ุงูููุชุฌ
```

### 4๏ธโฃ ุตูุญุฉ ุงูููุชุฌ (`/product/:id`)
```
โ ูุนุฑุถ:
   - ุตูุฑ ุงูููุชุฌ (carousel ุฅุฐุง ุฃูุซุฑ ูู ุตูุฑุฉ)
   - ุงุณู ุงูููุชุฌ
   - ุงูุณุนุฑ ุงูุญุงูู + ุงูุณุนุฑ ุงููุฏูู
   - ูุณุจุฉ ุงูุฎุตู (ุชููุงุฆูุงู)
   - ูุตู ุงูููุชุฌ
   - ูุนูููุงุช ุงููุชุฌุฑ (ุงุณูุ ุชููููุ ูุฏููุฉ)
   - ุนููุงู ุงููุชุฌุฑ
   - ุฎูุงุฑุงุช ุงูุชูุตูู (ุชูุตูู/ุงุณุชูุงู)
   
โ ุฃุฒุฑุงุฑ:
   ๐ต ุฒุฑ ูุจูุฑ: "ุงุทูุจ ุนุจุฑ ูุงุชุณุงุจ"
   ๐ต ุฒุฑ ุซุงููู: "ุงุชุตู ุจุงููุชุฌุฑ ูุจุงุดุฑุฉ"
```

### 5๏ธโฃ ุนูุฏ ุงูุถุบุท ุนูู "ุงุทูุจ ุนุจุฑ ูุงุชุณุงุจ"

#### ูุญุฏุซ ุดูุฆูู ูู ููุณ ุงูููุช:

#### ุฃ) ุชุณุฌูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```javascript
await supabase.from("whatsapp_orders").insert({
  store_id: "uuid-of-store",
  offer_id: null,
  customer_message: "ุงูุฑุณุงูุฉ ุงููุงููุฉ",
  source_page: "product_page",
  user_agent: "Mozilla/5.0...",
  status: "NEW"
});
```

#### ุจ) ูุชุญ ูุงุชุณุงุจ:
```javascript
const message = `
ุงูุณูุงู ุนูููู ูุฑุญูุฉ ุงููู ูุจุฑูุงุชู

ุฃุฑุบุจ ูู ุงูุงุณุชูุณุงุฑ ุนู ุงูููุชุฌ:
๐๏ธ ูุงุจุชุดููู

ูู ุงููุชุฌุฑ:
๐ช ูููุชูุง ุงููุฎุชุตุฉ

ุจูุงูุงุชู:
ุงูุงุณู: 
ุฑูู ุงูุฌูุงู: 
ุงููุฏููุฉ/ุงูุญู: 
ุทุฑููุฉ ุงูุงุณุชูุงู: [ ] ุชูุตูู  [ ] ุงุณุชูุงู ูู ุงููุญู

ููุงุญุธุงุช ุฅุถุงููุฉ: 
`;

window.open('https://wa.me/966532402020?text=' + encodedMessage);
```

### 6๏ธโฃ ุงูุฃุฏูู ูุณุชูุจู ุงูุทูุจ

#### ูู ุงููุงุชุณุงุจ:
```
โ ูุตูู ุนูู ุฑูู ุงูููุตุฉ: 966532402020
โ ุงูุฑุณุงูุฉ ุฌุงูุฒุฉ ุจูู ุงูุชูุงุตูู
โ ุงูุนููู ูููู ุจูุงูุงุชู ููุฑุณู
```

#### ูู ููุญุฉ ุงูุชุญูู (`/admin/whatsapp-orders`):
```
โ ูุธูุฑ ุงูุทูุจ ููุฑุงู (Realtime)
โ ุญุงูุฉ: NEW (ุฌุฏูุฏ)
โ ูุนูููุงุช ูุงููุฉ:
   - ุงูููุชุฌ ุงููุทููุจ
   - ุงููุชุฌุฑ
   - ุงููุฏููุฉ
   - ููุช ุงูุทูุจ
   - ุงูุฑุณุงูุฉ ุงููุงููุฉ
```

### 7๏ธโฃ ุงูุฃุฏูู ูุฏูุฑ ุงูุทูุจ

```
1. ูุถุบุท "ุนุฑุถ ุงูุชูุงุตูู"
   โ
2. ูุดุงูุฏ:
   โ ูุนูููุงุช ุงูุนููู (ุฅุฐุง ููุฃูุง)
   โ ูุนูููุงุช ุงููุชุฌุฑ ูุงูููุชุฌ
   โ ุงูุฑุณุงูุฉ ุงูุฃุตููุฉ
   
3. ูุชูุงุตู:
   ๐ ุฒุฑ "ุงุชุตู ุจุงูุนููู"
   ๐ฌ ุฒุฑ "ุชูุงุตู ูุน ุงูุชุงุฌุฑ" (ูุงุชุณุงุจ ุฌุงูุฒ)
   
4. ูุบูุฑ ุงูุญุงูุฉ:
   ๐ต NEW โ IN_PROGRESS
   
5. ูุชูุงุตู ูุน ุงูุชุงุฌุฑ:
   - ูุฑุณู ุชูุงุตูู ุงูุทูุจ
   - ูุฃุฎุฐ ุชุฃููุฏ ุงูุชููุฑ
   - ูุฃุฎุฐ ุงูุณุนุฑ ุงูููุงุฆู
   
6. ูุฑุฌุน ููุนููู:
   - ูุคูุฏ ุงูุทูุจ
   - ูุนุทู ุงูุณุนุฑ ุงูููุงุฆู
   - ูุญุฏุฏ ููุนุฏ ุงูุชูุตูู/ุงูุงุณุชูุงู
   
7. ุงูุชุงุฌุฑ ูููุฐ ุงูุทูุจ
   
8. ุงูุฃุฏูู ูุญุฏุซ ุงูุญุงูุฉ:
   โ IN_PROGRESS โ DONE
   โฑ๏ธ ููุญุณุจ ููุช ุงูุงุณุชุฌุงุจุฉ ุชููุงุฆูุงู
```

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุงูุนูุงูุงุช ุงููุงููุฉ

```sql
-- 1. ุงููุชุงุฌุฑ
stores {
  id (PK)
  owner_id โ users.id
  city_id โ cities.id
  category_id โ categories.id
}

-- 2. ุงูููุชุฌุงุช
products {
  id (PK)
  store_id โ stores.id  // ุนูุงูุฉ 1:M
}

-- 3. ุทูุจุงุช ุงููุงุชุณุงุจ
whatsapp_orders {
  id (PK)
  store_id โ stores.id   // ูู ุฃู ูุชุฌุฑ
  offer_id โ offers.id   // ุฃู ูู ุฃู ุนุฑุถ (nullable)
  product_id            // ุณูุถููู ูุงุญูุงู
}

-- ุงูุนูุงูุงุช:
1 ูุชุฌุฑ โ M ููุชุฌุงุช
1 ูุชุฌุฑ โ M ุทูุจุงุช ูุงุชุณุงุจ
1 ููุชุฌ โ M ุทูุจุงุช ูุงุชุณุงุจ
```

---

## ๐ ุณูุงุณุงุช ุงูุฃูุงู (RLS)

### ููููุชุฌุงุช:
```sql
-- ุนุงูุฉ ูููุฑุงุกุฉ (ุงูููุชุฌุงุช ุงููุดุทุฉ ููุท)
CREATE POLICY "public_read_products"
ON products FOR SELECT
USING (is_active = true);

-- ุงูุชุงุฌุฑ ูุฏูุฑ ููุชุฌุงุช ูุชุฌุฑู ููุท
CREATE POLICY "merchant_manage_own_products"
ON products FOR ALL
USING (
  store_id IN (
    SELECT id FROM stores 
    WHERE owner_id = auth.uid()
  )
);

-- ุงูุฃุฏูู ูุฏูุฑ ูู ุดูุก
CREATE POLICY "admin_manage_all_products"
ON products FOR ALL
USING (has_role(auth.uid(), 'admin'));
```

### ูุทูุจุงุช ุงููุงุชุณุงุจ:
```sql
-- ุงูุฃุฏูู ููุท ูุดุงูุฏ ุงูุทูุจุงุช
CREATE POLICY "admin_view_whatsapp_orders"
ON whatsapp_orders FOR SELECT
USING (has_role(auth.uid(), 'admin'));

-- ุงูุฌููุน ูููููู ุฅูุดุงุก ุทูุจุงุช (ููุนููุงุก ุจุฏูู ุชุณุฌูู)
CREATE POLICY "anyone_create_orders"
ON whatsapp_orders FOR INSERT
WITH CHECK (true);
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงููุชุงุญุฉ

### ูู Dashboard ุงูุฃุฏูู:
```
โ ุฅุฌูุงูู ุงูููุชุฌุงุช
โ ุงูููุชุฌุงุช ุงููุดุทุฉ
โ ุงูููุชุฌุงุช ุงููุฎููุฉ
โ ุงูููุชุฌุงุช ุจุนุฑูุถ ุฎุงุตุฉ
โ ุฅุฌูุงูู ุทูุจุงุช ุงููุงุชุณุงุจ
โ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ
โ ูุชูุณุท ููุช ุงูุงุณุชุฌุงุจุฉ
```

### ูู ุตูุญุฉ ุทูุจุงุช ุงููุงุชุณุงุจ:
```
โ ุฅุฌูุงูู ุงูุทูุจุงุช
โ ุทูุจุงุช ุฌุฏูุฏุฉ (NEW)
โ ููุฏ ุงููุนุงูุฌุฉ (IN_PROGRESS)
โ ููุชููุฉ (DONE)
โ ููุบูุฉ (CANCELED)
โ ูุชูุณุท ููุช ุงูุงุณุชุฌุงุจุฉ ุจุงูุฏูุงุฆู
```

---

## ๐จ ุงููุงุฌูุงุช ุงููุชุงุญุฉ

### 1. ููุนููู:
- `/stores` - ูุงุฆูุฉ ุงููุชุงุฌุฑ
- `/product/:id` - ุตูุญุฉ ุงูููุชุฌ ุงููุฑุฏูุฉ โญ **ุฌุฏูุฏ**
- `/offers` - ูุงุฆูุฉ ุงูุนุฑูุถ

### 2. ููุชุงุฌุฑ:
- `/merchant` - ููุญุฉ ุงูุชุญูู
- ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
- ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ููุชุฌุงุช
- ุชูุนูู/ุฅุฎูุงุก ููุชุฌุงุช

### 3. ููุฃุฏูู:
- `/admin/products` - ุฅุฏุงุฑุฉ ุฌููุน ุงูููุชุฌุงุช
- `/admin/whatsapp-orders` - ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- `/admin/dashboard` - ุงูุฅุญุตุงุฆูุงุช

---

## ๐ ูุซุงู ุนููู ูุงูู

```
๐ฑ ุงูุนููู: ุฃุญูุฏ ูู ุงูุฑูุงุถ

1. ูุฏุฎู /stores
2. ูุจุญุซ ุนู "ูููุฉ"
3. ูุฌุฏ "ูููุชูุง ุงููุฎุชุตุฉ"
4. ูุฏุฎู ุตูุญุฉ ุงููุชุฌุฑ
5. ูุดุงูุฏ ููุชุฌ "ูุงุจุชุดููู - 16 ุฑูุงู"
6. ูุถุบุท ุนูู ุงูููุชุฌ โ /product/abc-123
7. ููุฑุฃ ุงูุชูุงุตูู
8. ูุถุบุท "ุงุทูุจ ุนุจุฑ ูุงุชุณุงุจ"

โ ููุณุฌู ุงูุทูุจ ูู DB ุชููุงุฆูุงู
โ ููุชุญ ูุงุชุณุงุจ ุจุฑุณุงูุฉ ุฌุงูุฒุฉ
โ ูููุฃ: "ุฃุญูุฏ - 0501234567 - ุญู ุงููุฑุฌุณ - ุชูุตูู"
โ ูุฑุณู

๐จโ๐ผ ุงูุฃุฏูู: ุฎุงูุฏ

1. ูุณุชูุจู ุงูุฑุณุงูุฉ ุนูู ูุงุชุณุงุจ
2. ูุฏุฎู /admin/whatsapp-orders
3. ูุดุงูุฏ ุงูุทูุจ (Realtime)
4. ูุถุบุท "ุนุฑุถ ุงูุชูุงุตูู"
5. ูุฑู ูู ุดูุก
6. ูุถุบุท "ุชูุงุตู ูุน ุงูุชุงุฌุฑ"
7. ูุฑุณู ููุชุงุฌุฑ: "ุทูุจ ูุงุจุชุดููู - ุฃุญูุฏ - ุชูุตูู ูููุฑุฌุณ"

๐จโ๐ณ ุงูุชุงุฌุฑ: ุนุจุฏุงููู

1. ูุณุชูุจู ุฑุณุงูุฉ ูู ุงูุฃุฏูู
2. ูุฌูุฒ ุงูุทูุจ
3. ูุฑุณู "ุฌุงูุฒ ููุชูุตูู"

๐จโ๐ผ ุงูุฃุฏูู:

1. ูุฑุฌุน ููุนููู: "ุทูุจู ุฌุงูุฒุ ุณูุตูู ุฎูุงู 30 ุฏูููุฉ"
2. ูุญุฏุซ ุงูุญุงูุฉ: IN_PROGRESS โ DONE
3. โฑ๏ธ ููุญุณุจ ููุช ุงูุงุณุชุฌุงุจุฉ: 25 ุฏูููุฉ
```

---

## โ ููุงุฐุง ูุฐุง ุงููุธุงู ุงุญุชุฑุงููุ

### 1. ูููุฐุฌ Marketplace ุตุญูุญ:
- โ ุงูููุตุฉ ูุณูุท 100%
- โ ูู ุทูุจ ููุฑ ุนุจุฑ ุงูููุตุฉ
- โ ุงูุทูุจุงุช ูุณุฌูุฉ ููุชุงุจุนุฉ

### 2. ูุงุจู ููุชุทููุฑ:
- โ ุงูุจููุฉ ุฌุงูุฒุฉ ูุฅุถุงูุฉ ุณูุฉ ูุงุญูุงู
- โ ุงูุจููุฉ ุฌุงูุฒุฉ ูุฅุถุงูุฉ ุฏูุน ุฅููุชุฑููู
- โ ูููู ุฅุถุงูุฉ ูุธุงู ุชููููุงุช

### 3. ุฅุญุตุงุฆูุงุช ุญููููุฉ:
- โ ูู ุทูุจ ูุณุฌู
- โ ูููู ุชุญููู:
  - ุฃูุซุฑ ุงูููุชุฌุงุช ุทูุจุงู
  - ุฃูุซุฑ ุงููุชุงุฌุฑ ูุดุงุทุงู
  - ุฃูุซุฑ ุงููุฏู ุทูุจุงู
  - ุฃููุงุช ุงูุฐุฑูุฉ

### 4. ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ:
- โ ูุงุฌูุฉ ุจุณูุทุฉ ูุณุฑูุนุฉ
- โ ุฑุณุงุฆู ูุงุชุณุงุจ ุฌุงูุฒุฉ
- โ ูุง ุญุงุฌุฉ ูุชุณุฌูู ุฏุฎูู ููุทูุจ
- โ ูุนูููุงุช ูุงุถุญุฉ

### 5. ููุงุณุจ ููู MVP:
- โ ูุง ูุญุชุงุฌ ุจูุงุจุงุช ุฏูุน ูุนูุฏุฉ
- โ ูุง ูุญุชุงุฌ ุณูุฉ ูุชูุฏูุฉ
- โ ูุนูู ููุฑุงู
- โ ูุซุจุช ุงูู Product-Market Fit

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

```
โ ููุตุฉ Marketplace ูุงููุฉ
โ ูุธุงู ููุชุฌุงุช ุงุญุชุฑุงูู
โ ูุธุงู ุทูุจุงุช ุนุจุฑ ูุงุชุณุงุจ
โ ููุญุฉ ุชุญูู ุดุงููุฉ
โ ุฅุญุตุงุฆูุงุช ุฏูููุฉ
โ Realtime updates
โ RLS ุฃููู ูุงูู
โ ุฌุงูุฒ ููุนุฑุถ ุนูู ูุฌูุฉ ุงูุชุญููู
โ ุฌุงูุฒ ููุชุทููุฑ ุงููุณุชูุจูู
```

---

**ุฑูู ูุงุชุณุงุจ ุงูููุตุฉ:** 966532402020

**ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ:**
- `/product/:id` - ุตูุญุฉ ุงูููุชุฌ (ุฌุฏูุฏ)
- `/admin/whatsapp-orders` - ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- `/admin/products` - ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
- `/merchant` - ููุญุฉ ุงูุชุงุฌุฑ

---

**ุชู ุงูุจูุงุก:** โ ููุชูู
**ุงูุญุงูุฉ:** ๐ข ุฌุงูุฒ ููุงุณุชุฎุฏุงู
**ุงูุฅุตุฏุงุฑ:** 2.0.0
